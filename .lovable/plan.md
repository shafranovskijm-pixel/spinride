
# План улучшений проекта SPINRIDE

## ✅ Выполнено

### 1. Динамические категории в админ-панели
- [x] Заменён захардкоженный массив `categories` на запрос к БД через `useQuery`
- [x] Добавлена загрузка категорий из таблицы `categories`

### 2. Интеграция офлайн-синхронизации
- [x] Добавлен `addToSyncQueue` в `use-favorites.tsx` при добавлении/удалении избранного в офлайн-режиме
- [x] Добавлена офлайн-поддержка заказов в `CheckoutPage.tsx` — заказы сохраняются в IndexedDB и синхронизируются при восстановлении сети

### 3. Улучшение UX формы заказа
- [x] Добавлена маска ввода телефона: `+7 (XXX) XXX-XX-XX`
- [x] Добавлена валидация номера телефона (11 цифр)
- [x] Визуальная индикация некорректного номера

### 4. Push-уведомления для PWA
- [x] Добавлены VAPID-ключи в секреты
- [x] Создана edge-функция `send-push`
- [x] UI для подписки на уведомления в `AdminSettings.tsx`
- [x] Интеграция с оформлением заказа — push отправляется вместе с Telegram

---

## ℹ️ Информация о безопасности

RLS-политики проверены:
- `orders`: INSERT разрешён всем (guest checkout), SELECT/UPDATE только для владельца или админа
- `favorites`: ALL только для владельца (`user_id = auth.uid()`)
- `reviews`: INSERT/UPDATE только для владельца
- `products`: SELECT для всех, изменения только админам

---

## Техническая сложность

| Задача | Статус | Время |
|--------|--------|-------|
| Динамические категории | ✅ | ~5 мин |
| Офлайн-синхронизация | ✅ | ~15 мин |
| Валидация телефона | ✅ | ~5 мин |
| Push-уведомления | ⏳ Ожидает VAPID | 40-60 мин |
